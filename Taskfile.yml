version: 3

silent: true

tasks:
  zip:
    sources: [gameData/**/*]
    cmds: [npm run zip]

  e2e:
    deps: [zip]
    cmds: [npx vite-node ./src/main.ts]

  eslint:
    sources: [src/**/*.ts]
    cmds:
      - echo "eslint started"
      - npx tsc
      - npx eslint --fix src
      - echo "eslint finished"

  lint-e2e-watch: task --parallel -w eslint e2e

  serve: npm run dev

  start:
    deps: [serve, lint-e2e-watch]
